{% extends "base.html" %}

{% block title %}Peer Benchmark - APAC IPv6{% endblock %}
{% block header_title %}Peer Benchmarking Engine{% endblock %}
{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto space-y-8 pb-20">
    <!-- Hero Header -->
    <div
        class="bg-white rounded-[2.5rem] p-10 border border-gray-100 shadow-2xl shadow-blue-500/5 relative overflow-hidden">
        <div class="relative z-10 flex flex-col md:flex-row items-center justify-between gap-8">
            <div class="flex items-center gap-6">
                <div
                    class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center text-white shadow-lg shadow-blue-500/30">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                    </svg>
                </div>
                <div>
                    <h2 class="text-3xl font-black text-slate-900 tracking-tight">Peer Benchmarking</h2>
                    <p class="text-slate-400 font-bold uppercase text-[10px] tracking-widest mt-1">Head-to-Head National
                        Analysis</p>
                </div>
            </div>

            <!-- Selectors -->
            <div class="flex flex-wrap items-center gap-4">
                <select id="entity1-select"
                    class="bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500/20 transition">
                    <option value="" disabled selected>Select Economy A</option>
                </select>
                <div class="text-slate-300 font-black italic">VS</div>
                <select id="entity2-select"
                    class="bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold text-slate-700 outline-none focus:ring-2 focus:ring-blue-500/20 transition">
                    <option value="" disabled selected>Select Economy B</option>
                </select>
                <button onclick="runComparison()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-black text-xs uppercase tracking-widest shadow-lg shadow-blue-500/30 transition active:scale-95">Compare</button>
            </div>
        </div>
    </div>

    <!-- Comparison Dashboard -->
    <div id="benchmark-view" class="hidden animate-in fade-in slide-in-from-bottom-5 duration-700 space-y-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Entity 1 Column -->
            <div
                class="bg-white rounded-[2.5rem] p-8 border border-gray-100 shadow-sm space-y-8 relative overflow-hidden group">
                <div class="absolute top-0 right-0 p-8">
                    <span id="e1-id"
                        class="text-6xl font-black text-slate-50 uppercase tracking-tighter group-hover:text-blue-50 transition duration-500">IN</span>
                </div>

                <div class="relative z-10">
                    <h3 id="e1-name" class="text-4xl font-black text-slate-900 mb-2">India</h3>
                    <div class="flex items-center gap-2">
                        <span id="e1-rank-badge"
                            class="bg-emerald-500 text-white text-[9px] font-black px-2 py-1 rounded-lg uppercase">Rank
                            #1</span>
                        <span class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">APAC Region</span>
                    </div>
                </div>

                <!-- Main Score Gauge -->
                <div class="flex flex-col items-center py-10">
                    <div class="relative w-48 h-48 flex items-center justify-center">
                        <svg class="w-full h-full -rotate-90">
                            <circle cx="96" cy="96" r="88" fill="transparent" stroke="#f1f5f9" stroke-width="12">
                            </circle>
                            <circle id="e1-gauge" cx="96" cy="96" r="88" fill="transparent" stroke="#2563eb"
                                stroke-width="12" stroke-dasharray="552.92" stroke-dashoffset="552.92"
                                stroke-linecap="round" class="transition-all duration-1000 ease-out"></circle>
                        </svg>
                        <div class="absolute text-center">
                            <span id="e1-score" class="text-5xl font-black text-slate-900 tabular-nums">0</span>
                            <span
                                class="block text-[10px] font-black text-slate-400 uppercase tracking-widest">Readiness</span>
                        </div>
                    </div>
                </div>

                <!-- Secondary Metrics -->
                <div class="grid grid-cols-1 gap-4">
                    <div class="bg-slate-50 rounded-2xl p-5 border border-slate-100">
                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Government Sync
                        </p>
                        <p id="e1-gov-sync" class="text-2xl font-black text-emerald-600">High</p>
                    </div>
                </div>
            </div>

            <!-- Entity 2 Column -->
            <div
                class="bg-white rounded-[2.5rem] p-8 border border-gray-100 shadow-sm space-y-8 relative overflow-hidden group">
                <div class="absolute top-0 left-0 p-8">
                    <span id="e2-id"
                        class="text-6xl font-black text-slate-50 uppercase tracking-tighter group-hover:text-indigo-50 transition duration-500">VN</span>
                </div>

                <div class="relative z-10 text-right">
                    <h3 id="e2-name" class="text-4xl font-black text-slate-900 mb-2">Vietnam</h3>
                    <div class="flex items-center gap-2 justify-end">
                        <span class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">APAC Region</span>
                        <span id="e2-rank-badge"
                            class="bg-blue-500 text-white text-[9px] font-black px-2 py-1 rounded-lg uppercase">Rank
                            #4</span>
                    </div>
                </div>

                <!-- Main Score Gauge -->
                <div class="flex flex-col items-center py-10">
                    <div class="relative w-48 h-48 flex items-center justify-center">
                        <svg class="w-full h-full -rotate-90">
                            <circle cx="96" cy="96" r="88" fill="transparent" stroke="#f1f5f9" stroke-width="12">
                            </circle>
                            <circle id="e2-gauge" cx="96" cy="96" r="88" fill="transparent" stroke="#6366f1"
                                stroke-width="12" stroke-dasharray="552.92" stroke-dashoffset="552.92"
                                stroke-linecap="round" class="transition-all duration-1000 ease-out"></circle>
                        </svg>
                        <div class="absolute text-center">
                            <span id="e2-score" class="text-5xl font-black text-slate-900 tabular-nums">0</span>
                            <span
                                class="block text-[10px] font-black text-slate-400 uppercase tracking-widest">Readiness</span>
                        </div>
                    </div>
                </div>

                <!-- Secondary Metrics -->
                <div class="grid grid-cols-1 gap-4">
                    <div class="bg-slate-50 rounded-2xl p-5 border border-slate-100">
                        <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">Government Sync
                        </p>
                        <p id="e2-gov-sync" class="text-2xl font-black text-indigo-600">Moderate</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- National Adoption Comparative Chart -->
        <div class="bg-white rounded-[2.5rem] p-10 border border-gray-100 shadow-sm relative overflow-hidden">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h4 class="text-xl font-black text-slate-900 leading-none">National Adoption Macro</h4>
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2">Comparative ISP Layer
                        Metrics</p>
                </div>
                <div class="bg-slate-50 px-4 py-2 rounded-xl border border-slate-100">
                    <span class="text-[10px] font-black text-slate-500 uppercase tracking-wider">Macro Analysis</span>
                </div>
            </div>
            <div id="national-adoption-chart" class="min-h-[300px]"></div>
        </div>

        <!-- Comparative Insights Table -->
        <div class="bg-slate-900 rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden">
            <div class="absolute top-0 right-0 p-10 opacity-5">
                <svg class="w-48 h-48" fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                </svg>
            </div>

            <h4 class="text-blue-400 font-black uppercase text-xs tracking-[0.3em] mb-10 flex items-center gap-4">
                <span class="w-12 h-[1px] bg-blue-500/30"></span> Detailed Gap Analysis
            </h4>

            <div class="space-y-6">
                <!-- Comparison Row: National Adoption -->
                <div class="grid grid-cols-12 gap-8 items-center border-b border-white/5 pb-6">
                    <div class="col-span-4 text-sm font-bold text-slate-400 uppercase tracking-wider">National Adoption
                    </div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e1-adoption-bar"
                                class="bg-blue-500 h-full rounded-full transition-all duration-1000" style="width: 0%">
                            </div>
                        </div>
                        <span id="e1-adoption" class="text-[10px] font-black text-blue-300 mt-2 block">0%</span>
                    </div>
                    <div class="col-span-2 text-center text-xs font-black text-white italic opacity-40">VS</div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e2-adoption-bar"
                                class="bg-indigo-500 h-full rounded-full transition-all duration-1000"
                                style="width: 0%"></div>
                        </div>
                        <span id="e2-adoption"
                            class="text-[10px] font-black text-indigo-300 mt-2 block text-right">0%</span>
                    </div>
                </div>

                <!-- Comparison Row: IPv6 DNS -->
                <div class="grid grid-cols-12 gap-8 items-center border-b border-white/5 pb-6">
                    <div class="col-span-4 text-sm font-bold text-slate-400 uppercase tracking-wider">IPv6 DNS Support
                    </div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e1-dns-progress"
                                class="bg-blue-500 h-full rounded-full transition-all duration-1000" style="width: 0%">
                            </div>
                        </div>
                        <span id="e1-dns-val" class="text-[10px] font-black text-blue-300 mt-2 block">0%</span>
                    </div>
                    <div class="col-span-2 text-center text-xs font-black text-white italic opacity-40">VS</div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e2-dns-progress"
                                class="bg-indigo-500 h-full rounded-full transition-all duration-1000"
                                style="width: 0%"></div>
                        </div>
                        <span id="e2-dns-val"
                            class="text-[10px] font-black text-indigo-300 mt-2 block text-right">0%</span>
                    </div>
                </div>

                <!-- Comparison Row: IPv6 Web -->
                <div class="grid grid-cols-12 gap-8 items-center border-b border-white/5 pb-6">
                    <div class="col-span-4 text-sm font-bold text-slate-400 uppercase tracking-wider">IPv6 Web (HTTPS)
                    </div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e1-web-progress"
                                class="bg-blue-500 h-full rounded-full transition-all duration-1000" style="width: 0%">
                            </div>
                        </div>
                        <span id="e1-web-val" class="text-[10px] font-black text-blue-300 mt-2 block">0%</span>
                    </div>
                    <div class="col-span-2 text-center text-xs font-black text-white italic opacity-40">VS</div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e2-web-progress"
                                class="bg-indigo-500 h-full rounded-full transition-all duration-1000"
                                style="width: 0%"></div>
                        </div>
                        <span id="e2-web-val"
                            class="text-[10px] font-black text-indigo-300 mt-2 block text-right">0%</span>
                    </div>
                </div>

                <!-- Comparison Row: DNSSEC -->
                <div class="grid grid-cols-12 gap-8 items-center pb-6">
                    <div class="col-span-4 text-sm font-bold text-slate-400 uppercase tracking-wider">DNSSEC Compliance
                    </div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e1-sec-progress"
                                class="bg-blue-500 h-full rounded-full transition-all duration-1000" style="width: 0%">
                            </div>
                        </div>
                        <span id="e1-sec-val" class="text-[10px] font-black text-blue-300 mt-2 block">0%</span>
                    </div>
                    <div class="col-span-2 text-center text-xs font-black text-white italic opacity-40">VS</div>
                    <div class="col-span-3">
                        <div class="w-full bg-white/5 h-2 rounded-full overflow-hidden">
                            <div id="e2-sec-progress"
                                class="bg-indigo-500 h-full rounded-full transition-all duration-1000"
                                style="width: 0%"></div>
                        </div>
                        <span id="e2-sec-val"
                            class="text-[10px] font-black text-indigo-300 mt-2 block text-right">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Empty State -->
    <div id="benchmark-empty"
        class="bg-white rounded-[2.5rem] py-32 border-2 border-dashed border-slate-100 text-center space-y-6">
        <div class="w-24 h-24 bg-slate-50 rounded-3xl flex items-center justify-center mx-auto text-slate-300">
            <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
            </svg>
        </div>
        <div>
            <h3 class="text-xl font-black text-slate-900">Entity Comparison Pending</h3>
            <p class="text-slate-400 font-bold text-xs uppercase tracking-widest mt-2">Select two APAC economies above
                to initialize benchmarking</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/benchmark.js"></script>
{% endblock %}